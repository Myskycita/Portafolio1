---
import type { NowPlayingTrackResponse } from "../lib/spotify";
import { get } from "../lib/spotify";
import { Icon } from "astro-icon";

const nowPlayingTrack = await get();
const result = (await nowPlayingTrack.json()) as NowPlayingTrackResponse;
---

<div
  class="w-full text-center md:w-[250px] font-medium rounded-lg hover:bg-[#87CB49]"
>
  {
    result.isPlaying ? (
      <a
        href={result.url}
        target="_blank"
        rel="noreferrer noopener flex"
        class="flex items-center justify-center hover:text-gray-900"
      >
        <Icon name="ph:spotify-logo-duotone" />
        <p class="ml-2 hover:text-gray-900 p-2">
          {result.title} - {result.artist}
        </p>
      </a>
    ) : (
      <span class="flex items-center justify-center hover:text-gray-900">
        <Icon name="ph:spotify-logo-duotone" />
        <p class="ml-2 hover:text-gray-900 p-2">
          Not playing anything right now!
        </p>
      </span>
    )
  }
</div>
